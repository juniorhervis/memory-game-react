name: Projeto DevOps

on:
  push:
    branches: [master]

jobs:
  build-job:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 16
      - run: npm ci

  teste-job:
    needs: build-job
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: AppThreat/sast-scan-action@master

  deploy-job:
    needs: teste-job
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: echo Hello World
      - uses: apogiatzis/ngrok-tunneling-action@<VERSION>
        with:
          timeout: 1h
          port: 3000
          ngrok_authtoken: ${{ secrets.NGROK_AUTHTOKEN }}
